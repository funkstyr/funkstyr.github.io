---
import PageLayout from "../layouts/BaseLayout.astro";
import Section from "../components/Section.astro";
import ProfileHeader from "../components/ProfileHeader.astro";
import FeaturedSeries from "../components/FeaturedSeries.astro";
import { getAllPosts, sortMDByDate } from "../utils/post";
import { resumeData } from "../data/resume";

const allPosts = await getAllPosts();
const sortedPosts = sortMDByDate(allPosts);

const claudeCodeSeries = sortedPosts
  .filter((post) => post.data.subtitle?.includes("Claude Code Series"))
  .sort((a, b) => (a.data.order ?? 0) - (b.data.order ?? 0));

const { aboutMe, whatIDo } = resumeData;
---

<PageLayout meta={{ title: "About Me" }}>
  <div class='flex w-full flex-col gap-y-10'>
    <ProfileHeader />

    <Section title='About Me'>
      <div class='space-y-4'>
        {aboutMe.map((paragraph) => (
          <p class='text-muted-foreground'>{paragraph}</p>
        ))}
      </div>
    </Section>

    <Section title='What I Do'>
      <div class='space-y-4'>
        {whatIDo.map((item) => (
          <div>
            <h3 class='font-bold mb-2'>{item.title}</h3>
            <p class='text-muted-foreground'>{item.description}</p>
          </div>
        ))}
      </div>
    </Section>

    <Section title='Featured Series'>
      <FeaturedSeries
        title='AI-Assisted Development with Claude Code'
        description={`A guide on building a development workflow that's faster and more reliable. Covers plan-based development, TypeScript, Turborepo, testing LLM outputs, and juggling this across packages.`}
        posts={claudeCodeSeries}
      />
    </Section>
  </div>
</PageLayout>
